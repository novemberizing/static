<!DOCTYPE html>
<html lang="en">
<html>
    <head>
        <title>Isotope</title>
        <script
            src="https://code.jquery.com/jquery-3.7.0.js"
            integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM="
            crossorigin="anonymous"></script>
        <script src="isotope.pkgd.js"></script>
        <style>
            * { box-sizing: border-box; }

            body {
                font-family: sans-serif;
            }

            /* ---- button ---- */
            .button {
                display: inline-block;
                padding: 0.5em 1.0em;
                background: #EEE;
                border: none;
                border-radius: 7px;
                background-image: linear-gradient( to bottom, hsla(0, 0%, 0%, 0), hsla(0, 0%, 0%, 0.2) );
                color: #222;
                font-family: sans-serif;
                font-size: 16px;
                text-shadow: 0 1px white;
                cursor: pointer;
            }

            .button:hover {
                background-color: #8CF;
                text-shadow: 0 1px hsla(0, 0%, 100%, 0.5);
                color: #222;
            }

            .button:active,
            .button.is-checked {
                background-color: #28F;
            }

            .button.is-checked {
                color: white;
                text-shadow: 0 -1px hsla(0, 0%, 0%, 0.8);
            }

            .button:active {
                box-shadow: inset 0 1px 10px hsla(0, 0%, 0%, 0.8);
            }

            /* ---- button-group ---- */

            .button-group {
                margin-bottom: 20px;
            }

            .button-group:after {
                content: '';
                display: block;
                clear: both;
            }

            .button-group .button {
                float: left;
                border-radius: 0;
                margin-left: 0;
                margin-right: 1px;
            }

            .button-group .button:first-child { border-radius: 0.5em 0 0 0.5em; }
            .button-group .button:last-child { border-radius: 0 0.5em 0.5em 0; }

            /* ---- isotope ---- */

            .grid {
                border: 1px solid #333;
            }

            /* clear fix */
            .grid:after {
                content: '';
                display: block;
            clear: both;
            }

            /* ---- .element-item ---- */

            .element-item {
                position: relative;
                float: left;
                width: 100px;
                height: 100px;
                margin: 5px;
                padding: 10px;
                background: #888;
                color: #262524;
            }

            .element-item > * {
                margin: 0;
                padding: 0;
            }

            .element-item .name {
                position: absolute;

                left: 10px;
                top: 60px;
                text-transform: none;
                letter-spacing: 0;
                font-size: 12px;
                font-weight: normal;
            }

            .element-item .symbol {
                position: absolute;
                left: 10px;
                top: 0px;
                font-size: 42px;
                font-weight: bold;
                color: white;
            }

            .element-item .number {
                position: absolute;
                right: 8px;
                top: 5px;
            }

            .element-item .weight {
                position: absolute;
                left: 10px;
                top: 76px;
                font-size: 12px;
            }

            .element-item.alkali          { background: #F00; background: hsl(   0, 100%, 50%); }
            .element-item.alkaline-earth  { background: #F80; background: hsl(  36, 100%, 50%); }
            .element-item.lanthanoid      { background: #FF0; background: hsl(  72, 100%, 50%); }
            .element-item.actinoid        { background: #0F0; background: hsl( 108, 100%, 50%); }
            .element-item.transition      { background: #0F8; background: hsl( 144, 100%, 50%); }
            .element-item.post-transition { background: #0FF; background: hsl( 180, 100%, 50%); }
            .element-item.metalloid       { background: #08F; background: hsl( 216, 100%, 50%); }
            .element-item.diatomic        { background: #00F; background: hsl( 252, 100%, 50%); }
            .element-item.halogen         { background: #F0F; background: hsl( 288, 100%, 50%); }
            .element-item.noble-gas       { background: #F08; background: hsl( 324, 100%, 50%); }

        </style>
        
    </head>
    <body>
        <h1>Isotope - filtering &amp; sorting</h1>
        <h2>Filter</h2>
        <div id="filters" class="button-group">
            <button class="button is-checked" data-filter="*">show all</button>
            <button class="button" data-filter=".metal">metal</button>
            <button class="button" data-filter=".transition">transition</button>
            <button class="button" data-filter=".alkali, .alkaline-earth">alkali and alkaline-earth</button>
            <button class="button" data-filter=":not(.transition)">not transition</button>
            <button class="button" data-filter=".metal:not(.transition)">metal but not transition</button>
            <button class="button" data-filter="numberGreaterThan50">number > 50</button>
            <button class="button" data-filter="ium">name ends with &ndash;ium</button>
        </div>

        <h2>Sort</h2>
        <div id="sorts" class="button-group">
            <button class="button is-checked" data-sort-by="original-order">original order</button>
            <button class="button" data-sort-by="name">name</button>
            <button class="button" data-sort-by="symbol">symbol</button>
            <button class="button" data-sort-by="number">number</button>
            <button class="button" data-sort-by="weight">weight</button>
            <button class="button" data-sort-by="category">category</button>
        </div>

        <div class="grid">
        </div>
        <script>
            const parent = document.querySelector(".grid");
            const elements = [];
            function create(className, category, html) {
                const o = document.createElement("div");
                o.setAttribute("class", className);
                o.setAttribute("data-category", category);
                o.innerHTML = html;
                // parent.appendChild(o);
                elements.push(o);
            }

            create("element-item transition metal {{ test }}",
                "transition",
                "<h3 class='name'>Mercury</h3><p class='symbol'>Hg</p><p class='number'>80</p><p class='weight'>200.59</p>");
            create("element-item metalloid {{ test }}",
                "metalloid",
                "<h3 class='name'>Tellurium</h3><p class='symbol'>Te</p><p class='number'>52</p><p class='weight'>127.6</p>");
            create("element-item post-transition metal {{ test }}",
                "post-transition",
                "<h3 class='name'>Bismuth</h3><p class='symbol'>Bi</p><p class='number'>83</p><p class='weight'>208.980</p>");

            // const elements = document.querySelectorAll("element-item");
            console.log(elements);
            const replacements = [];
            elements.forEach(element => {
                console.log(element);
                replacements.push(element.cloneNode(true));
            });
            replacements.forEach(element => {
                console.log(element);
                parent.appendChild(element);
                setTimeout(() => {
                    for(const attribute of element.attributes) {
                        if(attribute.name === "class"){
                            let start = 0;
                            const strings = [];
                            if((start = attribute.value.indexOf("{{")) !== -1) {
                                const end = attribute.value.indexOf("}}");
                                if(end !== -1) {
                                    const value = attribute.value.substring(0, start) + "helloworld" + attribute.value.substring(end + 2);
                                    console.log(value);
                                    attribute.value = attribute.nodeValue = value;
                                }
                            }
                        }
                    }
                }, 1000);
                
                
            });

            var elem = document.querySelector('.grid');
            var iso = new Isotope( elem, {
                // options
                itemSelector: '.element-item',
                layoutMode: 'fitRows'
            });

            console.log(iso);
  
        </script>
    </body>
</html>

